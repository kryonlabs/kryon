# Kryon UI Framework Configuration
# This is the main configuration that uses the new C Core architecture

# Link against C core library
--passL:-L/home/wao/lyra/proj/kryon/build -lkryon_core

# Include paths for C core headers
--passC:-I/home/wao/lyra/proj/kryon/core/include

# Nim module search paths for IDE support
--path:bindings/nim
--path:core/include

# Define that we're using the C core
--define:useCCore

# Nim compiler settings
--gc:arc
--threads:on

# Target-specific settings
when defined(mcu):
  # MCU target: no heap, fixed-point math
  --define:KRYON_PLATFORM_MCU
  --define:KRYON_NO_HEAP
  --define:KRYON_NO_FLOAT
  --passC:-DKRYON_TARGET_PLATFORM=1
elif defined(web):
  # Web target: JavaScript/WASM
  --define:KRYON_PLATFORM_WEB
  --passC:-DKRYON_TARGET_PLATFORM=2
else:
  # Desktop target: full features
  --define:KRYON_PLATFORM_DESKTOP
  --define:KRYON_NO_FLOAT
  --passC:-DKRYON_TARGET_PLATFORM=0
  --passC:-DKRYON_NO_FLOAT=1

# Backend selection (can be overridden by command line)
--backend:c

# Optimization settings
--opt:speed

# Debug settings
when defined(debug):
  --debuginfo
  --linetrace
  --checks:on
else:
  --checks:off
